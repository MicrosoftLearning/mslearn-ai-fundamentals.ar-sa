---
lab:
  title: استكشاف التعلُّم الآلي التلقائي ي Azure Machine Learning
---

# استكشاف التعلُّم الآلي التلقائي ي Azure Machine Learning

في هذا التمرين، ستستخدم ميزة التعلّم الآلي التلقائي في التعلّم الآلي في Azure لتدريب نموذج التعلم الآلي وتقييمه. ثم ستقوم بنشر النموذج المُدرّب واختباره.

يجب أن يستغرق هذا التمرين حوالي **35** دقيقة لإكماله.

## إنشاء مساحة عمل "التعلم الآلي من Azure"

لاستخدام التعلّم الآلي في Azure، تحتاج إلى توفير مساحة عمل تعلّم آلي في Azure في اشتراك Azure الخاص بك. ثم ستتمكن من استخدام استوديو التعلّم الآلي في Azure للعمل مع الموارد في مساحة العمل الخاصة بك.

> **تلميح**: إذا كان لديك بالفعل مساحة عمل التعلّم الآلي في Azure، يمكنك استخدام ذلك والتخطي إلى المهمة التالية.

1. سجل الدخول إلى [مدخل Azure](https://portal.azure.com) في `https://portal.azure.com` باستخدام بيانات اعتماد Microsoft الخاصة بك.

1. حدد **＋إنشاء مورد**، وابحث عن *التعلّم الآلي*، وقم بإنشاء مورد **تعلّم آلي** جديد بالإعدادات التالية:
    - **الاشتراك**: *اشتراك Azure الخاص بك*.
    - **Resource group**: *أنشئ مجموعة موارد أو حددها*.
    - **الاسم**: *أدخل اسم فريد لمساحة العمل الخاصة بك*.
    - **المنطقة**: شرق الولايات المتحدة
    - **Storage account**: *لاحظ حساب التخزين الجديد الافتراضي الذي سيتم إنشاؤه لمساحة العمل الخاصة بك*.
    - **Key vault**: *لاحظ الحاوية الرئيسية الجديدة الافتراضية التي سيتم إنشاؤها لمساحة العمل الخاصة بك*.
    - **Application insights**: *لاحظ مورد application insights الجديد الافتراضي الذي سيتم إنشاؤه لمساحة العمل الخاصة بك*.
    - **Container registry**: None (*سيتم إنشاء سجل واحد تلقائيًا عند أول مرة تقوم فيها بتوزيع نموذج في حاوية*).

1. حدد **Review + create**، ثم حدد **Create**. انتظر حتى يتم إنشاء مساحة العمل الخاصة بك (قد يستغرق الأمر بضع دقائق)، ثم انتقل إلى المورد الموزع.

#### تشغيل الاستوديو 

1. في مورد مساحة عمل تعلم الآلة في Azure، حدد **تشغيل الاستوديو** (أو افتح علامة تبويب جديدة للمتصفح وانتقل إلى [https://ml.azure.com](https://ml.azure.com)، وسجّل الدخول إلى استوديو Azure Machine Learning باستخدام حساب Microsoft الخاص بك). أغلق أي رسائل يتم عرضها.

1. في Azure Machine Learning studio، يجب أن تشاهد مساحة العمل التي تم إنشاؤها حديثًا. إذا لم يكن الأمر كذلك، فحدد **جميع مساحات العمل** في القائمة اليسرى ثم حدد مساحة العمل التي أنشأتها للتو.

##  استخدم التعلّم الآلي التلقائي لتدريب نماذج

يتيح لك التعلّم الآلي التلقائي تجربة خوارزميات ومعلمات متعددة لتدريب نماذج متعددة، وتحديد أفضل نموذج لبياناتك. في هذا التمرين، ستستخدم مجموعة بيانات من التفاصيل القديمة لتأجير الدراجات لتدريب نموذج يتنبأ بعدد مرات تأجير الدراجات التي ينبغي توقعها في يوم معين، بناءً على الميزات الموسمية والأرصاد الجوية.

> **الاقتباس**: *البيانات المستخدمة في هذا التمرين مُشتقة من [Capital Bikeshare](https://www.capitalbikeshare.com/system-data) وتستخدم وفقًا لـ[اتفاقية ترخيص](https://www.capitalbikeshare.com/data-license-agreement)البيانات المنشورة*.

1. في [استوديو التعلم الآلي في Azure](https://ml.azure.com?azure-portal=true)، اعرض صفحة **التعلّم الآلي التلقائي** (ضمن **التأليف**).

1. إنشاء مهمة تعلّم آلي تلقائية جديدة باستخدام الإعدادات التالية، باستخدام **التالي** كما هو مطلوب للتقدم من خلال واجهة المستخدم:

    **الإعدادات الأساسية**:

    - **اسم الوظيفة**: يجب أن يكون حقل اسم الوظيفة مملوءًا مسبقًا باسم فريد. احتفظ به كما هو.
    - **اسم التجربة الجديدة**: `mslearn-bike-rental`
    - **الوصف**: `Automated machine learning for bike rental prediction`
    - **العلامات**: *بدون*

   **نوع المهمة والبيانات**:
    
    >**ملاحظة**: بعض الاشتراكات لديها أذونات لا تسمح بإضافة *بيانات الدراجة* إلى *workspaceblobstore*. إذا واجهت هذه المشكلة، فستحتاج حاليًا إما إلى التبديل إلى اشتراك شخصي، أو ضبط أذونات اشتراكك. 

    - **تحديد نوع المهمة**: تراجع
    - **حدد البيانات**:
        - قُم بإنشاء أصل بيانات جديد باستخدام الإعدادات التالية:
            - **Data type**:
                - **الاسم:** `bike-rentals`
                - **الوصف**: `Historic bike rental data`
                - **Type**: جدول (mltable)
            - **مصدر البيانات**:
                - حدد **من ملفات محلية**
            - **نوع تخزين الوجهة**:
                - **نوع مخزن البيانات**: Azure Blob Storage
                - **الاسم**: workspaceblobstore
            - **تحديد MLtable**:
                - *قُم بتنزيل مجلد[ بيانات الدراجة ](https://aka.ms/bike-rentals)وفك ضغطه من `https://aka.ms/bike-rentals`.*
                - **قم بتحميل المجلد**: *قُم بتحميل مجلد **بيانات الدراجة** المستخرج، والذي يحتوي على ملفات تعريف البيانات والجدول التي تحتاج إليها لمجموعة بيانات التدريب الخاصة بك.*
                - **ملاحظة**: *إذا واجهت رسالة لتخطي التحقق من صحة البيانات من أجل المتابعة، فحدد خيار تخطي التحقق من صحة البيانات.*
        - حدد أصل بيانات **تأجير الدراجات** الذي تم إنشاؤه حديثًا، وتابع تحديد وظيفة التعلم الآلي التلقائي في الصفحة التالية (**إعدادات المهمة**).

    **إعدادات المهمة**:

    - **نوع المهمة**: تراجع
    - **مجموعة البيانات**: bike-rentals
    - **العمود الهدف**: التأجيرات (عدد صحيح)
    - **إعدادات التكوين الإضافية**:
        - **القياس الرئيسي**: NormalizedRootMeanSquaredError
        - **شرح أفضل نموذج**: *<u>تم إلغاء </u>التحديد*
        - **تمكين تكديس المجموعات**: *<u>تم إلغاء </u>التحديد*
        - **استخدام جميع النماذج المدعومة**: <u>غير</u> محدد. *ستقيد الوظيفة لتجربة عدد قليل من الخوارزميات المحددة فقط.*
        - **Allowed models**: *حدد فقط **RandomForest** و**LightGBM** — عادة ما ترغب في تجربة أكبر عدد ممكن، ولكن كل نموذج مضاف يزيد من الوقت الذي يستغرقه تشغيل الوظيفة.*
    - **** الحدود: *توسيع هذا القسم*
        - **الحد الأقصى للمحاولات**: `3`
        - **الحد الأقصى للمحاولات المتوازية**: `3`
        - **الحد الأقصى للعُقد**: `3`
        - **حد درجة القياس**: `0.085` (*بحيث تنتهي المهمة إذا وصل النموذج إلى درجة القياس التي تمت تسويتها لجذر متوسط الخطأ التربيعي التي تبلغ 0,085 أو أقل.*)
        - **مهلة التجربة**: `15`
        - **انتهاء مهلة التكرار**: `15`
        - **تمكين الإنهاء المبكر**: *محدد*
    - **    التحقق من الصحة والاختبار**:
        - **نوع التحقق من الصحة**: تقسيم التحقق من صحة التدريب
        - **النسبة المئوية للبيانات** التحقق من الصحة: 10
        - **مجموعة بيانات الاختبار**: بدون

    **الحساب**:

    - **حدد نوع الحساب**: بلا خادم
    - **Virtual machine type**: معالج
    - **Virtual machine tier**: Dedicated
    - **Virtual machine size**: Standard_DS3_V2\*
    - **عدد المثيلات**: 1

    \* *إذا كان اشتراكك يقيد أحجام الأجهزة الافتراضية المتوفِّرة لك، فاختر أي حجم متوفِّر.*

1. تقديم وظيفة التدريب. تبدأ تلقائيًا.

1. انتظر حتى تنتهي المهمة. قد يستغرق بعض الوقت - الآن قد يكون الوقت المناسب لفترة استراحة لتناول القهوة!

## مراجعة أفضل نموذج

عند اكتمال مهمة التعلّم الآلي التلقائي، يمكنك مراجعة أفضل نموذج تم تدريبه.

1. في علامة التبويب **Overview** شغّل التعلم الآلي التلقائي، لاحظ أفضل ملخص نموذج.
    ![لقطة شاشة لأفضل ملخص نموذج لوظيفة التعلم الآلي التلقائية مع مربع حول algorithm name.](./media/use-automated-machine-learning/complete-run.png)
  
1. حدد النص الموجود أسفل **اسم الخوارزمية** لأفضل نموذج لعرض تفاصيله.

1. حدد علامة التبويب ⁧**المقاييس⁧**⁩ وحدد ⁧**⁩القيم المتبقية⁧**⁩ ومخططات ⁧**⁩predicted_true⁧**⁩ إذا لم تكن محددة بالفعل.

    راجع المخططات البيانية التي توضح أداء النموذج. يظهر مخطط**القيم المتبقية** *القيم المتبقية* (الاختلافات بين القيم المتوقعة والقيم الفعلية) كمدرج تكراري. يقارن مخطط **predicted_true** القيم المتوقعة بالقيم الحقيقية.

## نشر النموذج واختباره

1. على علامة تبويب **النموذج** لأفضل نموذج مدرب من قبل مهمة التعلم الآلي التلقائية خاصتك، حدد **توزيع** واستخدم خيار **نقطة النهاية في الوقت الحقيقي** لتوزيع النموذج مع الإعدادات التالية:
    - **جهاز ظاهري**: Standard_DS3_v2
    - **عدد المثيلات**: 3
    - **نقطة النهاية**: جديد
    - **اسم نقطة النهاية**: *احتفظ بالاسم الافتراضي أو تأكد من أنه فريد بشكل عمومي*
    - **اسم التوزيع**: *اترك الإعداد الافتراضي*
    - **استنتاج تجميع البيانات**: *معطّل*
    - **نموذج الحزمة**: *معطّل*

    > **ملاحظة** إذا تلقيت رسالة تفيد بعدم وجود حصة كافية لتحديد الجهاز الظاهري *Standard_DS3_v2*، فيرجى تحديد جهاز آخر.

1. انتظر حتى بدء التوزيع - قد يستغرق هذا بضع ثوانٍ. ستتم الإشارة إلى **حالة النشر** لنقطة النهاية في الجزء الرئيسي من الصفحة على أنها *قيد التشغيل*.
1. انتظر حتى تتغير **حالة النشر** إلى *نجح*. قد يستغرق هذا ما يصل إلى 5-10 دقائق.

## اختبار الخدمة المنشورة

يمكنك الآن اختبار الخدمة التي تم توزيعها.

1. في إستوديو التعلم الآلي من Azure، في القائمة اليمنى، حدد **نقاط النهاية** وافتح نقطة النهاية التي أنشأتها في الوقت الحقيقي.

1. في صفحة نقطة النهاية في الوقت الحقيقي، اعرض علامة التبويب **الاختبار**.

1. في جزء **بيانات الإدخال لاختبار نقطة النهاية**، استبدل قالب JSON ببيانات الإدخال التالية:

    ```json
      {
     "input_data": {
       "columns": [
         "day",
         "mnth",
         "year",
         "season",
         "holiday",
         "weekday",
         "workingday",
         "weathersit",
         "temp",
         "atemp",
         "hum",
         "windspeed"
       ],
       "index": [0],
       "data": [[1,1,2022,2,0,1,1,2,0.3,0.3,0.3,0.3]]
     }
    }

    ```

1. انقر فوق الزر **الاختبار**.

1. راجع نتائج الاختبار، التي تتضمن عددًا متوقعًا من مرات الإيجار استنادً إلى ميزات الإدخال - مثل:

    ```JSON
    [
      352.3564674945718
    ]
    ```

    أخذ جزء الاختبار بيانات الإدخال واستخدم النموذج الذي دربته لإرجاع العدد المتوقع من الإيجارات.

## اعرض التعليمات البرمجية لاستخدام الخدمة

الآن بعد أن أصبحت لديك نقطة نهاية خدمة تنبؤية، يمكن للمطورين إنشاء تطبيقات تستخدمها.

1. في صفحة نقطة النهاية في الوقت الحقيقي، اعرض علامة التبويب **الاستخدام**.
1. راجع نموذج التعليمات البرمجية لاستخدام نقطة النهاية الخاصة بك، والتي يتم توفيرها للغات برمجة متعددة.

دعونا نستعرض ما فعلته. لقد استخدمت مجموعة بيانات من بيانات تأجير الدراجات التاريخية لتدريب نموذج. يتوقع النموذج عدد مرات تأجير الدراجات المتوقع في يوم معين، استناداً إلى *الميزات*الموسمية والأرصاد الجوية. وأخيرًا، اختبرت النموذج وراجعت التعليمات البرمجية التي يمكن للمطور استخدامها لإنشاء تطبيق لاستخدامه.

## التنظيف

تتم استضافة خدمة الويب التي قمت بإنشائها في *Azure Container Instance*. إذا كنت لا تنوي إجراء المزيد من التجارب عليها، فإنه يجب عليك حذف نقطة النهاية لتجنب تراكم استخدام Azure غير الضروري.

1. في [إستوديو التعلم الآلي من Azure](https://ml.azure.com)، في علامة التبويب **نقاط النهاية**، حدد نقطة النهاية التي قمت بنشرها. ثم حدد **Delete**، وقم بالتأكيد على رغبتك في حذف نقطة النهاية.

    يضمن حذف الحساب عدم تحصيل رسوم من اشتراكك مقابل موارد الحساب. ومع ذلك، سيتم تحصيل مبلغ صغير لتخزين البيانات طالما أن مساحة عمل التعلم الآلي من Azure موجودة في اشتراكك. إذا انتهيت من استكشاف التعلم الآلي من Azure، فإنه يمكنك حذف مساحة عمل التعلم الآلي من Azure والموارد المقترنة بها.

لحذف مساحة العمل لديك:

1. في [مدخل Azure](https://portal.azure.com)، ومن صفحة **Resource groups**، افتح مجموعة الموارد التي حددتها عند إنشاء مساحة عمل Azure Machine Learning.
2. انقر فوق **حذف مجموعة الموارد**، واكتب اسم مجموعة الموارد لتأكيد أنك ترغب في حذفها، ثم حدد **Delete**.
