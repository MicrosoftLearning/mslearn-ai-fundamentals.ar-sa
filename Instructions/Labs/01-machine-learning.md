---
lab:
  title: استكشاف التعلُّم الآلي التلقائي ي Azure Machine Learning
---

# استكشاف التعلُّم الآلي التلقائي ي Azure Machine Learning

في هذا التمرين، ستستخدم ميزة التعلّم الآلي التلقائي في التعلّم الآلي في Azure لتدريب نموذج التعلم الآلي وتقييمه. ثم ستقوم بنشر النموذج المُدرّب واختباره.

يجب أن يستغرق هذا التمرين حوالي **30** دقيقة حتى يكتمل.

## إنشاء مساحة عمل "التعلم الآلي من Azure"

لاستخدام التعلّم الآلي في Azure، تحتاج إلى توفير مساحة عمل تعلّم آلي في Azure في اشتراك Azure الخاص بك. ثم ستتمكن من استخدام استوديو التعلّم الآلي في Azure للعمل مع الموارد في مساحة العمل الخاصة بك.

> **تلميح**: إذا كان لديك بالفعل مساحة عمل التعلّم الآلي في Azure، يمكنك استخدام ذلك والتخطي إلى المهمة التالية.

1. سجل الدخول إلى [مدخل Azure](https://portal.azure.com) في `https://portal.azure.com` باستخدام بيانات اعتماد Microsoft الخاصة بك.

1. حدد **＋إنشاء مورد**، وابحث عن *التعلّم الآلي*، وقم بإنشاء مورد **تعلّم آلي** جديد بالإعدادات التالية:
    - **الاشتراك**: *اشتراك Azure الخاص بك*.
    - **Resource group**: *أنشئ مجموعة موارد أو حددها*.
    - **الاسم**: *أدخل اسم فريد لمساحة العمل الخاصة بك*.
    - **Region**: *حدد أقرب منطقة جغرافية لك*.
    - **Storage account**: *لاحظ حساب التخزين الجديد الافتراضي الذي سيتم إنشاؤه لمساحة العمل الخاصة بك*.
    - **Key vault**: *لاحظ الحاوية الرئيسية الجديدة الافتراضية التي سيتم إنشاؤها لمساحة العمل الخاصة بك*.
    - **Application insights**: *لاحظ مورد application insights الجديد الافتراضي الذي سيتم إنشاؤه لمساحة العمل الخاصة بك*.
    - **Container registry**: None (*سيتم إنشاء سجل واحد تلقائيًا عند أول مرة تقوم فيها بتوزيع نموذج في حاوية*).

1. حدد **Review + create**، ثم حدد **Create**. انتظر حتى يتم إنشاء مساحة العمل الخاصة بك (قد يستغرق الأمر بضع دقائق)، ثم انتقل إلى المورد الموزع.

1. حدد **Launch studio** (أو افتح علامة تبويب جديدة في مستعرض الويب، وانتقل إلى [https://ml.azure.com](https://ml.azure.com?azure-portal=true)، وسجل الدخول إلى Azure Machine Learning studio باستخدام حساب Microsoft). أغلق أي رسائل يتم عرضها.

1. في Azure Machine Learning studio، يجب أن تشاهد مساحة العمل التي تم إنشاؤها حديثًا. إذا لم يكن الأمر كذلك، فحدد **جميع مساحات العمل** في القائمة اليسرى ثم حدد مساحة العمل التي أنشأتها للتو.

##  استخدم التعلّم الآلي التلقائي لتدريب نماذج

يتيح لك التعلّم الآلي التلقائي تجربة خوارزميات ومعلمات متعددة لتدريب نماذج متعددة، وتحديد أفضل نموذج لبياناتك. في هذا التمرين، ستستخدم مجموعة بيانات من التفاصيل القديمة لتأجير الدراجات لتدريب نموذج يتنبأ بعدد مرات تأجير الدراجات التي ينبغي توقعها في يوم معين، بناءً على الميزات الموسمية والأرصاد الجوية.

> **الاقتباس**: *البيانات المستخدمة في هذا التمرين مُشتقة من [Capital Bikeshare](https://www.capitalbikeshare.com/system-data) وتستخدم وفقًا لـ[اتفاقية ترخيص](https://www.capitalbikeshare.com/data-license-agreement)البيانات المنشورة*.

1. في [استوديو التعلم الآلي في Azure](https://ml.azure.com?azure-portal=true)، اعرض صفحة **التعلّم الآلي التلقائي** (ضمن **التأليف**).

1. إنشاء مهمة تعلّم آلي تلقائية جديدة باستخدام الإعدادات التالية، باستخدام **التالي** كما هو مطلوب للتقدم من خلال واجهة المستخدم:

    **الإعدادات الأساسية**:

    - **اسم المهمة**: `mslearn-bike-automl`
    - **اسم التجربة الجديدة**: `mslearn-bike-rental`
    - **الوصف**: تعلّم آلي تلقائي للتنبؤ باستئجار الدراجات
    - **العلامات**: *بدون*

   **نوع المهمة والبيانات**:

    - **تحديد نوع المهمة**: تراجع
    - **حدد مجموعة البيانات**: إنشاء مجموعة بيانات جديدة بالإعدادات التالية:
        - **Data type**:
            - **الاسم:** `bike-rentals`
            - **الوصف**: `Historic bike rental data`
            - **Type**: جدول (mltable)
        - **مصدر البيانات**:
            - حدد **من ملفات محلية**
        - **نوع تخزين الوجهة**:
            - **نوع مخزن البيانات**: Azure Blob Storage
            - **الاسم**: workspaceblobstore
        - **تحديد MLtable**:
            - **قم بتحميل المجلد**: *قم بتنزيل المجلد المتضمن الملفين اللذين تحتاج إلى تحميلهما من * `https://aka.ms/bike-rentals`

        حدد **إنشاء**. بعد إنشاء مجموعة البيانات، حدد مجموعة بيانات **تأجير الدراجات** لمواصلة إرسال مهمة التعلُّم الآلي التلقائي.

    **إعدادات المهمة**:

    - **نوع المهمة**: تراجع
    - **مجموعة البيانات**: bike-rentals
    - **العمود الهدف**: التأجيرات (عدد صحيح)
    - **إعدادات التكوين الإضافية**:
        - **القياس الرئيسي**: NormalizedRootMeanSquaredError
        - **شرح أفضل نموذج**: *غير محدد*
        - **تمكين تكديس المجموعات**: *تم إلغاء التحديد*
        - **استخدام جميع النماذج المدعومة**: <u>غير</u> محدد. *ستقيد الوظيفة لتجربة عدد قليل من الخوارزميات المحددة فقط.*
        - **Allowed models**: *حدد فقط **RandomForest** و**LightGBM** — عادة ما ترغب في تجربة أكبر عدد ممكن، ولكن كل نموذج مضاف يزيد من الوقت الذي يستغرقه تشغيل الوظيفة.*
    - **** الحدود: *توسيع هذا القسم*
        - **الحد الأقصى للمحاولات**: `3`
        - **الحد الأقصى للمحاولات المتوازية**: `3`
        - **الحد الأقصى للعُقد**: `3`
        - **حد درجة القياس**: `0.085` (*بحيث تنتهي المهمة إذا وصل النموذج إلى درجة القياس التي تمت تسويتها لجذر متوسط الخطأ التربيعي التي تبلغ 0,085 أو أقل.*)
        - **انتهاء مهلة eXPERIMENT**: `15`
        - **انتهاء مهلة التكرار**: `15`
        - **تمكين الإنهاء المبكر**: *محدد*
    - **    التحقق من الصحة والاختبار**:
        - **نوع التحقق من الصحة**: تقسيم التحقق من صحة التدريب
        - **النسبة المئوية للبيانات** التحقق من الصحة: 10
        - **مجموعة بيانات الاختبار**: بدون

    **الحساب**:

    - **حدد نوع الحساب**: بلا خادم
    - **Virtual machine type**: معالج
    - **Virtual machine tier**: Dedicated
    - **Virtual machine size**: Standard_DS3_V2\*
    - **عدد المثيلات**: 1

    \* *إذا كان اشتراكك يقيد أحجام الأجهزة الافتراضية المتوفِّرة لك، فاختر أي حجم متوفِّر.*

1. تقديم وظيفة التدريب. تبدأ تلقائيًا.

1. انتظر حتى تنتهي المهمة. قد يستغرق بعض الوقت - الآن قد يكون الوقت المناسب لفترة استراحة لتناول القهوة!

## مراجعة أفضل نموذج

عند اكتمال مهمة التعلّم الآلي التلقائي، يمكنك مراجعة أفضل نموذج تم تدريبه.

1. في علامة التبويب **Overview** شغّل التعلم الآلي التلقائي، لاحظ أفضل ملخص نموذج.
    ![لقطة شاشة لأفضل ملخص نموذج لوظيفة التعلم الآلي التلقائية مع مربع حول algorithm name.](./media/use-automated-machine-learning/complete-run.png)

    > **ملاحظة** قد ترى رسالة تقول "تحذير: تم الوصول إلى نتيجة الخروج المحددة من قبل المستخدم...". هذه رسالة متوقعة. تابع إلى الخطوة التالية.
  
1. حدد النص الموجود أسفل **اسم الخوارزمية** لأفضل نموذج لعرض تفاصيله.

1. حدد علامة التبويب ⁧**المقاييس⁧**⁩ وحدد ⁧**⁩القيم المتبقية⁧**⁩ ومخططات ⁧**⁩predicted_true⁧**⁩ إذا لم تكن محددة بالفعل.

    راجع المخططات البيانية التي توضح أداء النموذج. يظهر مخطط**القيم المتبقية** *القيم المتبقية* (الاختلافات بين القيم المتوقعة والقيم الفعلية) كمدرج تكراري. يقارن مخطط **predicted_true** القيم المتوقعة بالقيم الحقيقية.

## نشر النموذج واختباره

1. على علامة تبويب **النموذج** لأفضل نموذج مدرب من قبل مهمة التعلم الآلي التلقائية خاصتك، حدد **توزيع** واستخدم خيار **نقطة النهاية في الوقت الحقيقي** لتوزيع النموذج مع الإعدادات التالية:
    - **جهاز ظاهري**: Standard_DS3_v2
    - **عدد المثيلات**: 3
    - **نقطة النهاية**: جديد
    - **اسم نقطة النهاية**: *احتفظ بالاسم الافتراضي أو تأكد من أنه فريد بشكل عمومي*
    - **اسم التوزيع**: *اترك الإعداد الافتراضي*
    - **استنتاج تجميع البيانات**: *معطّل*
    - **نموذج الحزمة**: *معطّل*

1. انتظر حتى بدء التوزيع - قد يستغرق هذا بضع ثوانٍ. سيتم الإشارة إلى **حالة النشر** لنقطة نهاية**predict-rentals** في الجزء الرئيسي من الصفحة *قيد التشغيل*.
1. انتظر حتى تتغير **حالة النشر** إلى *نجح*. قد يستغرق هذا ما يصل إلى 5-10 دقائق.

## اختبار الخدمة المنشورة

يمكنك الآن اختبار الخدمة التي تم توزيعها.

1. في استوديو Azure Machine Learning، في القائمة اليسرى، حدد **نقاط النهاية** وافتح نقطة النهاية في الوقت الفعلي **predict-rentals** 

1. في عرض صفحة نقطة نهاية **predict-rentals**، اعرض علامة تبويب **الاختبار**.

1. في جزء **بيانات الإدخال لاختبار نقطة النهاية**، استبدل قالب JSON ببيانات الإدخال التالية:

    ```JSON
    {
      "Inputs": { 
        "data": [
          {
            "day": 1,
            "mnth": 1,   
            "year": 2022,
            "season": 2,
            "holiday": 0,
            "weekday": 1,
            "workingday": 1,
            "weathersit": 2, 
            "temp": 0.3, 
            "atemp": 0.3,
            "hum": 0.3,
            "windspeed": 0.3 
          }
        ]    
      },   
      "GlobalParameters": 1.0
    }
    ```

1. انقر فوق الزر **الاختبار**.

1. راجع نتائج الاختبار، التي تتضمن عددًا متوقعًا من مرات الإيجار استنادً إلى ميزات الإدخال - مثل:

    ```JSON
    {
      "Results": [
        444.27799000000000
      ]
    }
    ```

    أخذ جزء الاختبار بيانات الإدخال واستخدم النموذج الذي دربته لإرجاع العدد المتوقع من الإيجارات.

دعونا نستعرض ما فعلته. لقد استخدمت مجموعة بيانات من بيانات تأجير الدراجات التاريخية لتدريب نموذج. يتوقع النموذج عدد مرات تأجير الدراجات المتوقع في يوم معين، استناداً إلى *الميزات*الموسمية والأرصاد الجوية.

## التنظيف

تتم استضافة خدمة الويب التي قمت بإنشائها في *Azure Container Instance*. إذا كنت لا تنوي إجراء المزيد من التجارب عليها، فإنه يجب عليك حذف نقطة النهاية لتجنب تراكم استخدام Azure غير الضروري.

1. في [آلة ستوديو Azure Machine Learning](https://ml.azure.com?azure-portal=true)، في علامة التبويب **نقاط النهاية**، حدد نقطة النهاية **predict-rentals**. ثم حدد **Delete**، وقم بالتأكيد على رغبتك في حذف نقطة النهاية.

    يضمن حذف الحساب عدم تحصيل رسوم من اشتراكك مقابل موارد الحساب. ومع ذلك، سيتم تحصيل مبلغ صغير لتخزين البيانات طالما أن مساحة عمل التعلم الآلي من Azure موجودة في اشتراكك. إذا انتهيت من استكشاف التعلم الآلي من Azure، فإنه يمكنك حذف مساحة عمل التعلم الآلي من Azure والموارد المقترنة بها.

لحذف مساحة العمل لديك:

1. في [مدخل Azure](https://portal.azure.com?azure-portal=true)، ومن صفحة **Resource groups**، افتح مجموعة الموارد التي حددتها عند إنشاء مساحة عمل Azure Machine Learning.
2. انقر فوق **حذف مجموعة الموارد**، واكتب اسم مجموعة الموارد لتأكيد أنك ترغب في حذفها، ثم حدد **Delete**.
